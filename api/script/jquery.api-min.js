(function(b){function e(a,f,g){if(a&&a.length){b.isArray(a)||(a=[a]);g.trigger("api."+f,[f,a])}}b.api=function(a,f,g){var c=b.extend({},b.api.defaults,g);c.data={HEAD:JSON.stringify(a),BODY:JSON.stringify(f)};b.ajax(c).done(function(d){e(!d.HEAD.result?[d.HEAD.errors.HEAD.error.message,d.HEAD.errors.HEAD.error.detail]:undefined,"errors",c.triggerElement);e(d.HEAD.errors,"errors",c.triggerElement);e(d.HEAD.warnings,"warnings",c.triggerElement);e(d.HEAD.successes,"successes",c.triggerElement);e(d.HEAD.messages,
"messages",c.triggerElement)})};b.api.defaults={dataType:"json",triggerElement:b("body"),type:"post",url:"/api"}})(jQuery);
