(function(b){function c(a,c,e){a&&a.length&&(b.isArray(a)||(a=[a]),e.trigger("api."+c,[c,a]))}b.api=function(a,f,e){var d=b.extend({},b.api.defaults,e||{});d.data={HEAD:JSON.stringify(a),BODY:JSON.stringify(f)};a=b.ajax(d);a.done(function(a){a.HEAD.result||b.each(a.HEAD.errors.HEAD,function(a,b){c([b.message,b.detail],"errors",d.triggerElement)});c(a.HEAD.errors,"errors",d.triggerElement);c(a.HEAD.warnings,"warnings",d.triggerElement);c(a.HEAD.successes,"successes",d.triggerElement);c(a.HEAD.messages,
"messages",d.triggerElement)});return a};b.api.defaults={dataType:"json",triggerElement:b("body"),type:"post",url:"/api"}})(jQuery);
